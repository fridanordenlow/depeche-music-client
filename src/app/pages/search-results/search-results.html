<div class="search-container">
  @if (currentQuery() && !isLoading()) {
  <h1 class="search-title">
    Search results for "<span>{{ currentQuery() }}</span
    >"
  </h1>
  } @if (isLoading()) {
  <app-loading></app-loading>
  } @if (errorMessage(); as message) {
  <div class="error-container">
    <mat-icon>error_outline</mat-icon>
    <p>{{ message }}</p>
  </div>
  } @if (searchResults(); as results) { @if (results.artists.items.length ||
  results.albums.items.length || results.tracks.items.length) {
  <div class="results-grid">
    @if (results.artists.items.length) {
    <div class="result-section">
      <h3 class="section-header">Artists</h3>
      @for (artist of results.artists.items; track artist.id) {
      <a class="result-item" [routerLink]="['/details', 'artist', artist.id]">
        @if (artist.images.length) {
        <img class="result-image circle" [src]="artist.images[2]?.url" />
        } @else {
        <mat-icon class="result-icon">person</mat-icon>
        }
        <span class="result-title">{{ artist.name }}</span>
      </a>
      }
    </div>
    } @if (results.albums.items.length) {
    <div class="result-section">
      <h3 class="section-header">Releases</h3>
      @for (album of results.albums.items; track album.id) {
      <a class="result-item" [routerLink]="['/details', 'album', album.id]">
        @if (album.images.length) {
        <img class="result-image" [src]="album.images[2]?.url" />
        } @else {
        <mat-icon class="result-icon">album</mat-icon>
        }
        <div class="result-info">
          <span class="result-title">{{ album.title }}</span>
          <span class="result-subtitle">{{ album.artists[0].name }}</span>
        </div>
      </a>
      }
    </div>
    } @if (results.tracks.items.length) {
    <div class="result-section">
      <h3 class="section-header">Tracks</h3>
      @for (track of results.tracks.items; track track.id) {
      <a class="result-item" [routerLink]="['/details', 'track', track.id]">
        @if (track.album?.imageUrl) {
        <img class="result-image" [src]="track.album?.imageUrl" alt="{{ track.album?.title }}" />
        } @else {
        <mat-icon class="result-icon">music_note</mat-icon>
        }
        <div class="result-info">
          <span class="result-title">{{ track.title }}</span>
          <span class="result-subtitle">
            {{ track.artists[0].name }}
            @if (track.album) { â€¢ {{ track.album.title }} }
          </span>
        </div>
      </a>
      }
    </div>
    }
  </div>
  } @else {
  <div class="no-results">
    <p>No results found for "{{ currentQuery() }}"</p>
  </div>
  } } @else {
  <div class="no-results">
    <p>No results found for "{{ currentQuery() }}"</p>
  </div>
  }
</div>
