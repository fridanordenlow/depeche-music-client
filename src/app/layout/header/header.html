<header class="header-content width-limit">
  <a [routerLink]="['/']" class="logo-link">
    <img src="dm-logo.svg" alt="Depeche Music logo" />
  </a>

  <nav class="desktop-menu">
    <a mat-button class="menu-item" [routerLink]="['/']">Home</a>
    <a mat-button class="menu-item" [routerLink]="['/library']">My Library</a>
    @if (auth.isAuthenticated()) {
    <button mat-stroked-button class="auth-btn" (click)="onLogout()">Log out</button>
    } @else {
    <button mat-stroked-button class="auth-btn" (click)="onLogin()">Log in</button>
    }
  </nav>

  <div class="mobile-menu">
    <button
      (click)="toggleMenu()"
      class="menu-trigger"
      [attr.aria-label]="isMenuOpen() ? 'Close menu' : 'Open menu'"
      [attr.aria-expanded]="isMenuOpen()"
      aria-controls="mobile-menu-panel"
    >
      @if (isMenuOpen()) {
      <mat-icon>close</mat-icon>
      } @else {
      <mat-icon>menu</mat-icon>
      }
    </button>

    @if (isMenuOpen()) {
    <div class="mobile-menu-overlay" (click)="closeMenu()"></div>
    <nav class="mobile-menu-panel" id="mobile-menu-panel">
      <a mat-menu-item [routerLink]="['/']" (click)="closeMenu()">
        <mat-icon>home</mat-icon>
        <span>Home</span>
      </a>
      <a mat-menu-item [routerLink]="['/library']" (click)="closeMenu()">
        <mat-icon>library_music</mat-icon>
        <span>My Library</span>
      </a>
      @if (auth.isAuthenticated()) {
      <a mat-menu-item (click)="onLogout()">
        <mat-icon>logout</mat-icon>
        <span>Logout</span>
      </a>
      } @else {
      <a mat-menu-item (click)="onLogin()">
        <mat-icon>login</mat-icon>
        <span>Login</span>
      </a>
      }
    </nav>
    }
  </div>
</header>
